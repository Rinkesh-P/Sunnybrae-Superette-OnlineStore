{% extends 'store/main.html' %}
{% load static %}
{% block content %}

{%if search_query %}
     <h3> Results for " {{search_query}}" </h3>
{%else%}
     <h3>Products</h3>
{%endif%}

<br> 


<div class="container">
     <form method ="GET" action = "{%url 'product'%}">
          <input name="search" type="text" placeholder="Search..."> <!-- Implement on 23/05-->
          <button type = "submit" class = "btn btn-primary"> Search </button> 
     </form>

     <div class="row" id="product-container">
          {% for product in page_object %}
          <div class="col-lg-4 product-item">
               <div class="box-element product">
                    <img class="thumbnail" src="{% static 'images/placeholder.png' %}" />
                    <h6>{{product.item_name}}</h6>
                    <hr>

                    <button class="btn btn-outline-secondary add-btn" data-product="{{product.item_id}}">Add to
                         Cart</button>
                    <a class="btn btn-outline-success" href="#">View</a>

                    <h5 style="display: inline-block; float: right">
                         ${{product.current_price|floatformat:2}}
                    </h5>
               </div>
          </div>
          {% endfor %}
     </div>
</div>

<br> 
<!-- Creating a pagination bar for all the pages so customer can click on it and browse other products-->
<nav aria-label="Page navigation">
     <ul class="pagination justify-content-center">
          {% if page_object.has_previous %}
          <!-- check if there is a previous page, if there is then display the link for it -->
          <li class="page-item">
               <a class="page-link" href="?page={{ page_object.previous_page_number }}{% if query %}&search={{ query }}{% endif %}" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span></a>
          </li>
          {%endif%}
          
          {%for num in page_object.paginator.page_range %} <!-- loop over over the page numbers that are avilable for pagination -->
               {% if page_object.number == num or num >= page_object.number|add:"-5" and num <= page_object.number|add:"5" %} <!-- Limit page numbers so that only 5 page numbers on either end are displayed-->
               <li class="page-item {%if page_object.number == num %} active {%endif%}"> <!-- check if current page num is == to the page number in the loop if it is equal then i want to highlight that page num-->
                    <a class="page-link" href="?page={{num}} {% if query %}&search={{ query }}{% endif %} ">{{num}}</a>
               </li>
               {% endif %}
          {%endfor%}
          
          {% if page_object.has_next %}
          <!-- check if there is a next page, if there is then display the link for it -->
          <li class="page-item">
               <a class="page-link" href="?page={{ page_object.next_page_number }} {% if query %}&search={{ query }}{% endif %}" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span> </a>
          </li>
          {% endif %}
     </ul>
</nav>

<br> 

{% comment %} <div class="text-center" id="loading">
     <button id="load-more" class="btn btn-primary">Load More</button>
</div> {% endcomment %}

{% endblock content %}